<li class="list-group-item">
  <div class="row align-items-center">
    <!-- Left Column: Checkbox + Task Info -->
    <div class="col-12 col-md-8 d-flex align-items-start align-items-md-center mb-2 mb-md-0">
      <!-- Checkbox -->
      <div class="form-check mr-2">
        <input
          type="checkbox"
          class="form-check-input"
          [checked]="task.isCompleted"
          (change)="toggleTask()"
          id="task-{{ task.id }}">
        <label class="form-check-label" [for]="'task-' + task.id"></label>
      </div>

      <!-- Task Information: Display or Edit Block -->
      <div class="flex-grow-1">
        <ng-container *ngIf="!isEditing; else editBlock">
          <span [ngClass]="{'text-muted text-decoration-line-through': task.isCompleted}">
            {{ task.description }}
          </span>
          <div class="mt-1">
            <small class="text-secondary" *ngIf="task.dueDate">
              Due: {{ task.dueDate | date:'shortDate' }}
            </small>
            <small class="text-secondary ml-2" *ngIf="task.priority">
              Priority: {{ task.priority | titlecase }}
            </small>
          </div>
        </ng-container>
        <ng-template #editBlock>
          <div class="mb-2">
            <input
              type="text"
              class="form-control form-control-sm mb-1"
              [(ngModel)]="editedDescription"
              (keydown)="onKeyPress($event)"
              placeholder="Edit description"
              autofocus>
          </div>
          <div class="form-row">
            <div class="col-6 mb-1">
              <input
                type="date"
                class="form-control form-control-sm"
                [(ngModel)]="editedDueDate"
                name="editedDueDate">
            </div>
            <div class="col-6 mb-1">
              <select
                class="form-control form-control-sm"
                [(ngModel)]="editedPriority"
                name="editedPriority">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
          </div>
        </ng-template>
      </div>
    </div>

    <!-- Right Column: Action Buttons -->
    <div class="col-12 col-md-4 d-flex justify-content-end align-items-center">
      <ng-container *ngIf="!isEditing; else editButtons">
        <button style="margin-right: 10px;" class="btn btn-sm btn-warning mr-2" (click)="editTask()">Edit</button>
      </ng-container>
      <ng-template #editButtons>
        <button style="margin-right: 10px;" class="btn btn-sm btn-success mr-2" (click)="finishEdit()">Save</button>
        <button style="margin-right: 10px;" class="btn btn-sm btn-secondary mr-2" (click)="cancelEdit()">Cancel</button>
      </ng-template>
      <button style="margin-right: 10px;" class="btn btn-sm btn-danger" (click)="delete()">Delete</button>
    </div>
  </div>
</li>
